/**
 * emmett - A custom events emitter for Node.js and the browser
 * @version v1.0.0
 * @link https://github.com/jacomyal/emmett
 * @license MIT
 */
(function(){"use strict";var t=function(){this._handlers={},this._handlersAll=[]};t.prototype.on=function(e,n,r){var s,h,i,l,o=arguments[arguments.length-1];if("boolean"==typeof o?(r=o,arguments.length--):r=!1,1===arguments.length&&"object"==typeof arguments[0])for(i in arguments[0])t.prototype.on.call(this,i,arguments[0][i],r);else if(1===arguments.length&&"function"==typeof arguments[0])this._handlersAll.push({handler:arguments[0]});else{if(2!==arguments.length||"function"!=typeof arguments[1])throw new Error("Wrong arguments.");for(l="string"==typeof e?[e]:e,s=0,h=l.length;s!==h;s+=1)i=l[s],i&&(this._handlers[i]||(this._handlers[i]=[]),this._handlers[i].push({once:!!r,handler:n}))}return this},t.prototype.once=function(){var t=Array.prototype.slice.call(arguments).concat(!0);return this.on.apply(this,t)},t.prototype.off=function(t,e,n){var r,s,h,i,l,o,a,f=arguments[arguments.length-1],d="string"==typeof t?[t]:t;if("boolean"==typeof f?(n=f,arguments.length--):n=!1,arguments.length){if(1===arguments.length&&"function"!=typeof d)for(r=0,s=d.length;r!==s;r+=1)delete this._handlers[d[r]];else if(1===arguments.length&&"function"==typeof d){e=arguments[0];for(l in this._handlers){for(o=[],r=0,s=this._handlers[l].length;r!==s;r+=1)this._handlers[l][r].handler!==e&&o.push(this._handlers[l][r]);this._handlers[l]=o}for(o=[],r=0,s=this._handlersAll.length;r!==s;r+=1)this._handlersAll[r].handler!==e&&o.push(this._handlersAll[r]);this._handlersAll=o}else if(2===arguments.length)for(r=0,s=d.length;r!==s;r+=1){if(a=d[r],this._handlers[a]){for(o=[],h=0,i=this._handlers[a].length;h!==i;h+=1)(this._handlers[a][h].handler!==e||n&&!this._handlers[a][h].once)&&o.push(this._handlers[a][h]);this._handlers[a]=o}this._handlers[a]&&0===this._handlers[a].length&&delete this._handlers[a]}}else{this._handlersAll=[];for(l in this._handlers)delete this._handlers[l]}return this},t.prototype.emit=function(t,e){var n,r,s,h,i,l,o,a="string"==typeof t?[t]:t;for(e=void 0===e?{}:e,n=0,r=a.length;n!==r;n+=1)if(o=a[n],l=(this._handlers[o]||[]).concat(this._handlersAll),l.length)for(i={type:o,data:e||{},target:this},s=0,h=l.length;s!==h;s+=1)l[s].handler.call(this,i),l[s].once&&this.off(o,l[s].handler,!0);return this},t.prototype.binder=function(){var t=new e(this);return arguments.length&&t.on.apply(t,arguments),t};var e=function(e){t.call(this),this._emitter=e,this._enabled=!0};e.prototype.on=function(){return t.prototype.on.apply(this,arguments),this._enabled&&this._emitter.on.apply(this._emitter,arguments),this},e.prototype.once=function(){var e=Array.prototype.slice.call(arguments).concat(!0);return t.prototype.on.apply(this,e),this._enabled&&this._emitter.on.apply(this._emitter,e),this},e.prototype.off=function(){return t.prototype.off.apply(this,arguments),this._enabled&&this._emitter.off.apply(this._emitter,arguments),this},e.prototype.enable=function(){var t,e,n;if(this._enabled)return this;for(this._enabled=!0,e=this._handlersAll,n=e.length-1;n>=0;n--)this._emitter.on(e[n].handler);for(t in this._handlers)for(e=this._handlers[t],n=e.length-1;n>=0;n--)this._emitter.on(t,e[n].handler);return this},e.prototype.disable=function(){function t(t){return t.handler===r[e].handler}var e,n,r;if(!this._enabled)return this;for(r=this._emitter._handlersAll,e=r.length-1;e>=0;e--)this._handlersAll.find(t)&&r.splice(e,1);for(n in this._handlers)for(r=this._handlers[n],e=r.length-1;e>=0;e--)this._emitter.off(n,r[e].handler);return this._enabled=!1,this},t.version="1.0.0","undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.Emitter=t):"function"==typeof define&&define.amd?define("emmett",[],function(){return t}):this.Emitter=t}).call(this);